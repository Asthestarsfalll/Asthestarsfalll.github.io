---
title: 计算机网络体系结构
tags: [computer network]
hide_table_of_contents: false
---

# 计算机网络体系结构

## 概念

计算机网络是一个将分散、具有独立功能的计算机系统，通过通信设备和线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。

:::tip

简而言之，计算机网络就是一些互联的、自洽的计算机系统的集合。

:::

随着计算机网络的发展，人们给出了不同的定义。

**广义观点**

只要能实现远程信息处理的系统或能进一步达到资源共享的系统，都是计算机网络。

:::note

该计算机通信网络在物理结构上具有计算机网络的雏形，但资源共享能力弱，属于计网发展的低级阶段。

:::

**资源共享观点**

计算机网络是 `以能够相互共享资源的方式互连起来的自治计算机系统的集合`，该定义包含三层含义：

1. 目的：资源共享；
2. 组成单元：多台独立自洽的计算机；
3. 规则：网络协议

:::note
该定义符合目前计网的基本特征。
:::

**用户透明性观点**

存在一个能为用户自动管理资源的网络操作系统，能调用用户所需要的资源，但整个网络对用户是透明的。

:::note

该观点描述了一个分布式系统，是计网未来发展追求的目标。

:::

## 组成

**组成部件**

1. **硬件**：主机（端系统）、通信链路（双绞线、光纤等）、交换设备（路由器、交换机等）和通信处理器（网卡等）；
2. **软件**：实现资源共享的各种软件（网络操作系统、邮件收发程序、FTP 程序、聊天程序等）；
3. **协议**：计网的核心，规定了网络传输数据时所必须遵守的规范。

**工作方式**

1. **边缘部分**：所有连接到 Internet 上、供用户直接使用的主机构成，用于进行通信和资源共享；
2. **核心部分**：由大量的网络和连接这些网络的路由器组成，**为边缘部分提供连通性和交换服务**。

**功能组成**

1. **通信子网**：由各种传输介质、通信设备和相应的网络协议组成，**使网络具有传输数据、交换、控制和存储的能力**；
2. **资源子网**：是实现资源共享功能的设备及其软件的集合，向用户提供共享其他计算机上硬件、软件和数据资源的服务。

## 功能

**数据通信**

最基本和最重要的功能，用于实现计算机之间的连接信息传输，可以对其进行统一的调配、控制和管理。

**资源共享**

软件、硬件和数据共享，使计网中的资源互通有无，从而提高资源利用率。

**分布式处理、负载均衡**

均衡负载，利用空闲计算机资源以提高整个系统的利用率。

**提高可靠性**

网络中的各台计算机可以通过网络互为替代机。

## 分类

**分布范围**

1. **广域网** （WAN）：提供长距离通信，范围为 **直径**（下同） 几十到几千千米的区域，故也称 `远程网`，是因特网的核心部分；
2. **城域网**（MAN）：范围几个街区甚至整个城市，5-50km 左右，大多采用 **以太网技术**，因此有时也并入局域网的范围讨论；
3. **局域网**（LAN）：一般用微机或工作站通过高速线路连接，范围小，通常几十米到几千米。网络内计算机数量没有太多限制，几到几百台都可以。 **传统上，局域网使用广播技术，而广域网使用交换技术；**
4. **个人区域网（PAN）**：个人设备哟个无线技术连接起来的网络，范围约为 10 米。

**传输技术**

1. 广播式网络，所有设备共享一个公共通信信道，所有设备都会受到报文，并且通过检查其目标地址来决定是否接受；**局域网基本上都采用广播通信，广域网中的无线、卫星通信也采用广播式通信技术**；
2. 点对点网络，每条物理线路连接一对设备，若其中没有直接连接的线路，则需要通过中间节点进行接受、存储和转发。

**拓扑结构**

1. **总线形网络**，使用单根传输线将计算机连接起来，建网方便，增减节点方便，节省线路，但是重负载时通信效率低，并且对故障敏感；
2. **星形网络**，每个设备单独与中央设备相联，中央设备早期是计算机，现在一般是交换器或路由器，**便于集中控制和管理**，但是成本高，中央设备对故障敏感；
3. **环形网络**，总线形网络形成一个环，最典型的例子就是 **令牌环局域网**，环可以是单环也可以是双环，环中信号是单向传播的；
4. **网状网络**，一般每个节点至少有两条路径与其他节点相连，多用在广域网中，有规则型和非规则型两种，可靠性高，但控制复杂，成本高。

**使用者**

1. **公用网**，指电信公司出资建造的大型网络，所有意愿缴纳费用的人都可以使用；
2. **专用网**，指某个部门为为满足本单位的需要而建造网络，不向本单位以外的人服务。

**交换技术**

1. **电路交换网络**，源节点和目的节点之间建立一条专用而线路，包括建立连接、传输数据和断开连接三个阶段，如 **传统电话网络**；
2. **报文交换网络（存储转发网络）**，用户数据与源地址、目的地址、校验码等辅助信息封装成报文发送到相邻节点，再 **整体** 存储转发；可以充分利用线路容量，实现流量控制、差错控制等，但是资源开销大（存在辅助信息），需要保证报文顺序正确，缓冲区难以管理（不知道报文的大小）；
3. **分组交换网络（包交换网络）**，将数据分为较短的固定长度数据块，同样加上辅助信息作为分组（包），以存储-转发的方式传输；每个分组可以单独进行传送而无需整体传送，现在主流网络基本都可视为分组交换网络。

**传输介质**

1. 有线：双绞线、同轴电缆等；
2. 无线：蓝牙、微波、无线电等。

## 标准化工作

因特网的所有标准以 RFC（Request For Comments）的形式发布，经过以下四个步骤可上升至因特网的正式标准：

1. 因特网草案，还不是 RFC 文档；
2. 建议标准，成为 RFC；
3. 草案标准；
4. 因特网标准。

## 性能指标

1. **带宽**，指信道传送数据的能力，单位是比特/秒；
2. **时延**，数据从网络一端传送到另一端的时间，由 4 个部分构成，发送时延（数据长度 / 带宽）、传播时延（信道长度 / 速率）、处理时延（分析、处理差错等）和排队时延；
3. **时延带宽积**，指第一个比特即将到到终点时，发送短已经发送了多少比特，计算公式为传播时延 $\times$ 信道带宽；
4. **往返时延**，从发送端发送一个端分组，到发送端收到接收端立即返回的确认所花费的时间；
5. **吞吐量**，单位时间内通过某个网络（信道、接口）的数据量；
6. **速率**，实际数据传输的速率，最高速率被称为带宽；
7. **信道利用率**，某信道有多少时间是有数据通过的。

# 参考模型

## 计算机网络分层结构

**目的**：降低协议设计和调试过程的复杂性，便于对网络进行研究、实现和维护、促进标准化工作。

**分层的基本原则**：

1. 每层都实现一种相对独立的功能，降低大系统的复杂度；
2. 各层之间界面自然清晰、易于理解、相互交流尽可能少；
3. 各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现；
4. 保持下层对上层的独立性，上层单向使用下层提供的服务；
5. 整个分层结构应能促进标准化工作。

:::info

每层的实体需要使用低层的服务来实现自身定义的功能，还要向高层提供服务，且不能跨层调用。

:::

在各层中，报文分为两部分——数据部分 SDU，控制信息部分 PCI，其共同组成协议数据单元 PDU.

## 协议、接口、服务

**协议（对等层）**

规则的集合，为了控制网络中数据交换而建立的规则、标准或约定称为网络协议。**不对等层实体间是没有协议的，只存在对同层实体间。**

协议由三部分组成：

1. **语法**，数据传输的格式；
2. **语义**，需要完成的功能，即需要发出什么控制信息，完成什么动作及应答；
3. **同步**，规定执行操作的条件、时许关系等。

**接口（上下层）**

接口是同一节点内 **相邻** 两层间交换信息的连接点，是一个 **系统内部的规定**，实体通过服务访问点（Service Access Point）交互。

**服务（下层与上层）**

服务是接口的子集，接口是对服务的具体实现进行抽象和规范化的方式。

服务仅指下层为相邻上层提供的功能调用，OSI 模型中成为服务原语：

1. **请求（Request）**，由用户发往提供者，请求完成某项工作；
2. **指示（Indication）**，由提供者发往用户，指示用户完成某件事；
3. **相应（Response）**，由用户发往提供者，作用为指示的响应；
4. **证实（Confirmation）**，由提供者发往用户，作用对请求的证实。

服务可按以下三种方式分类：

1. **面向连接服务与无连接服务**，前者需先建立连接，并且结束后要释放连接，后者直接发送数据，不保证可靠性；
2. **可靠服务和不可靠服务**，前者具有纠错、检错、应答机制，后者不保证信息传输的正确性
3. **有应答服务和无应答服务**，前者收到数据后由传输系统内部自动向发送方应答，后者不自动给出应。答，若需，则由高层实现，如 www 服务。

## ISO/OSI 和 TCP/IP

国际标准化组织（ISO）提出的为参考模型，通常称 OSI 参考模型、OSI 参考模型有 7 层：**物理、数据链路、网络、传输、会话、表示、应用**。

:::info

低三层为 **通信子网**，高三层为 **资源子网**。

:::

TCP/IP 模型只有 5 层（或者 4 层）：**网络接口（物理、数据链路）、网络、传输、应用**。

OSI 参考模型由于实现复杂并没有成为事实上的标准，其从设计之初就希望定义一个全世界计算机网络都要遵循的统一标准，从而导致其软件效率极低，反而 TCP/IP 模型被广泛使用，但是 OSI 参考模型的最大贡献是精准定义了协议、接口和服务三个概念，TCP/IP 模型没有对其区分，不符合软件工程的思想。

TCP/IP 在设计过程中是先出现协议，模型实际上是对已有协议的描述，因此不会出现协议不能匹配模型的情况。同时 TCP/IP 还考虑到了多种异构网的互联问题，于是将 IP 作为单独的一层。

## 其他

**计算机网络和分布式计算机系统的主要区别**

后者中的所有计算机对用户透明。

**为什么 IP 协议是无连接的**

当时无连接的设备价格便宜、灵活可靠，且在传输层使用了面向连接的 TCP 协议。

**端到端通信和点到点通信的区别**

通信子网提供点到点服务、传输层提供端到端通信，点到点通信并不能保证传输的可靠性，端到端建立在点到点的基础上。

